<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radium Engine: doc/developer/cmakeutilities.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="radium-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">904ecaf4554303f255d3b826b24ef9cc87f8d90a</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cmakeutilities_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">doc/developer/cmakeutilities.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cmakeutilities_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;\page cmakeutilities Cmake utilities for developing using Radium </div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[TOC]</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;The Radium environment could be used in several ways </div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; 1. developing some specific applications, </div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; 2. extending the Radium capabilities by developing new libraries</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; 3. integrating new functionalities in the Radium applications using plugins.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;As Radium relies on the [cmake](https://cmake.org/documentation/) build and configuration system, this </div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;documentation focuses on how to configure your build system to use and extend Radium using Radium cmake utilities.</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;Complete functional examples using these cmake scripts are accessible in the `src/tests/ExampleApps` and `src/tests/ExamplePluginWithLib` directories of the [Radium source distribution](https://github.com/STORM-IRIT/Radium-Engine).</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;# Radium cmake utilities</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;Once installed, either from source or from pre-built binaries, Radium could be used and extended in any application, library or plugin as a cmake package.</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;To integrate the Radium libraries into your build-chain configuration, you have to ask cmake to find the Radium package.</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;As for any cmake package, this could be done by adding the following line into your `CMakeLists.txt` file:</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;find_package(Radium REQUIRED Core Engine)</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;~~~</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;Remember to configure your project by giving the cmake command line option `-DRadium_DIR=/path/to/installed/Radium/lib/cmake/Radium` so that the `find_package` command could find the Radium package definition.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;Once found, the Radium package defines a cmake target for each requested components (`Core` and `Engine` in the example above) in the cmake namespace `Radium`.</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;When configuring your own target in your `CMakeLists.txt` file, you just need to link with those targets to get access to all the public interface of Radium (include search path, libraries, ...), for instance:</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;target_link_libraries (myTarget PUBLIC Radium::Core Radium::Engine)</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;~~~</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;The radium package also defines several cmake functions, described below, that you can use to ease the configuration of your application, library or plugin, mainly to install them in a relocatable way while allowing their use from their own build-tree. </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;The functions defined by the Radium package are the following:</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;1. Client application configuration</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  - [`configure_radium_app`](#configure_radium_app).</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;2. Extending Radium through libraries</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  - [`configure_radium_library`](#configure_radium_library).</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  - [`installTargetResources`](#installTargetResources).</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  - [`configure_radium_package`](#configure_radium_package).</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  - [`radium_exported_resources`](#radium_exported_resources).</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;3. Extending Radium through plugins </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  - [`configure_radium_plugin`](#configure_radium_plugin).</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  </div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;## Client application configuration</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;### Function `configure_radium_app` {#configure_radium_app}</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;configure_radium_app( </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    NAME applicationName                        # The name of the executable target to configure as a relocatable application</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    [USE_PLUGINS]                               # Set this if the application uses installed plugins. </div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    [RESOURCES ResourceDir1 ResourceDir2 ...]   # List of directories to install as application resources</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;)</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;~~~</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;This function configures the executable target `&lt;NAME&gt;` for installation so that the installation directory is relocatable and distributable.</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;This function takes the following parameters:</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;*Parameter name*                            | *Parameter description*</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;--------------------------------------------|--------------------</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;`&lt;NAME&gt; applicationName`                    | The name of the *executable* target to configure and install</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;`&lt;USE_PLUGINS&gt;`                             | If this option is given, the plugins installed into the Radium bundle at the installation time will be copied into the application bundle.</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;`&lt;RESOURCES&gt; ResourceDir1 ResourceDir2 ...` | Optional list of directories to be considered as application resources and installed into the application bundle.</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;When installed into a directory `&lt;prefix&gt;`, the application bundle has the following structure on linux, windows or on MacOsX (if the executable is not configured as a `MACOSX_BUNDLE`):</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;```</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;&lt;prefix&gt;/</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;├── bin/</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;|   └──  applicationName</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;├── Resources/</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;|   ├── ResourceDir1/</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;|   ├── ResourceDir2/</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;|   ...</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;```</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;For `MACOSX_BUNDLE` applications, a standard `.app` MacOsX application is generated.</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;### Limitations</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;For now (Radium version of August 2020): </div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  - Linux application can be relocated only on the build system.</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  </div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;To get relocatable packages, download pre-built binaries here: [https://github.com/STORM-IRIT/Radium-Releases/releases](https://github.com/STORM-IRIT/Radium-Releases/releases)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;## Extending Radium through libraries</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;### Function `configure_radium_library` {#configure_radium_library}</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;configure_radium_library( </div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    TARGET targetName               # Name of the target to configure as a Radium Library</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    FILES file1[file2[file3 ...]]   # list of headers to install</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    [TARGET_DIR directoryName]      # Name of the directory where files are installed (default &lt;prefix&gt;/include/&lt;TARGET&gt;)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    [NAMESPACE NameSpace]           # Namespace of the imported target (default Radium)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    [PACKAGE_CONFIG file.cmake.in]  # name of the configure script model for the given target</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    [PACKAGE_DIR packageDirName]    # Name of the directory where the cmake config file will be installed (default &lt;prefix&gt;/lib/cmake/Radium)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;~~~</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;This cmake function configures the `&lt;TARGET&gt;` for installation and for further import in client project using `find_package(&lt;TARGET&gt;)`.</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;In order to use the library either through an imported target from an installed binary or as a project target in another component on the same build tree, this function defines an alias target with the same name than the imported one.</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;This function also defines the symbol &lt;TARGET&gt;_EXPORTS so that, it could be used to allow symbol import/export from dynamic library.</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;This function takes the following parameters:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;*Parameter name*   | *Parameter description*</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;-------------------|--------------------</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;`&lt;TARGET&gt;`         | The name of the target to configure</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;`&lt;FILES&gt;`          | Expected to be public headers, they will be installed in the include directory of the project installation configuration `${CMAKE_INSTALL_PREFIX}/include`.</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;`&lt;TARGET_DIR&gt;`     | Optional. `&lt;FILES&gt;` will be installed into the `${CMAKE_INSTALL_PREFIX}/include/&lt;TARGET_DIR&gt;` directory. If not, the files will be installed into `${CMAKE_INSTALL_PREFIX}/include/&lt;TARGET&gt;` directory.</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;`&lt;NAMESPACE&gt;`      | If given, the imported target will be `&lt;NAMESPACE&gt;::&lt;TARGET&gt;`. If not, the imported target will be `Radium::&lt;TARGET&gt;`</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;`&lt;PACKAGE_CONFIG&gt;` | If given, a configure script, to be used by `find_package`, will be generated. If not, only the exported targets will be generated.</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;`&lt;PACKAGE_DIR&gt;`    | If given, the cmake configuration script `&lt;TARGET&gt;Config.cmake` searched by `find_package(&lt;TARGET&gt;)` will be installed in the directory `${CMAKE_INSTALL_PREFIX}/&lt;PACKAGE_DIR&gt;`. If not, the configure script will be installed in the directory `&lt;${CMAKE_INSTALL_PREFIX}/lib/cmake/Radium`.</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;Note that the parameters `&lt;PACKAGE_CONFIG&gt;` and `&lt;PACKAGE_DIR&gt;` could be omitted as the associated cmake package module could be generated using the function [`configure_radium_package`](#configure_radium_package) documented below. If these parameter are given here, they will be forwarded to this function.</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;In order to allow usage of installed library in all supported systems (Linux, MacOs, Windows), one of the public header, that might be named, e.g. `&lt;TARGET&gt;Macros.hpp` and included all the public or private headers, should contain the following :</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;~~~{.cpp}</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;#pragma once</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;#include &lt;Core/RaCore.hpp&gt;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;#if defined &lt;TARGET&gt;_EXPORTS</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;#    define &lt;TARGET&gt;_API DLL_EXPORT</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;#else</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;#    define &lt;TARGET&gt;_API DLL_IMPORT</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;#endif</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;~~~</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;Then, in the library source code, each exported symbol should be prefixed by `&lt;TARGET&gt;_API` e.g.</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;~~~{.cpp}</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;#pragma once</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;#include &lt; &lt;TARGET&gt;/&lt;TARGET&gt;Macros.hpp &gt;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;class &lt;TARGET&gt;_API MyAwesomeMaterial : public Ra::Engine::Material</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    ...</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;};</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;&lt;TARGET&gt;_API bool initializeMyLibrary();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;~~~</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;Assuming a library `MyLib` was configured as follows:</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;... </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;configure_radium_library(</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    TARGET MyLib</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    NAMESPACE MyLib</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    PACKAGE_CONFIG ${CMAKE_CURRENT_SOURCE_DIR}/Config.cmake.in</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    PACKAGE_DIR ${CMAKE_INSTALL_PREFIX}/lib/cmake</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    FILES &quot;${public_headers};${public_inlines}&quot;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;~~~</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;This library could be used either from its installed binaries :</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;find_package(MyLib) </div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;...</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;target_link_libraries(</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    MyProject</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    PUBLIC</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    Radium::Core</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    Radium::Engine</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    MyLib::MyLib</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;~~~</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;or from the same build tree :</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;add_subdirectory(MyLibSource) </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;...</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;target_link_libraries(</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    MyProject</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    PUBLIC</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    Radium::Core</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    Radium::Engine</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    MyLib::MyLib</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;)</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;~~~</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;### Function `installTargetResources` {#installTargetResources}</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;installTargetResources( </div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    TARGET targetName               # Name of the target for which resources must be installed                      </div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    DIRECTORY resourceDirectory  # location, in the source tree, of the resources </div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    [BUILD_LOCATION whereToLink]    # In the build tree, where to link the resources (default ${CMAKE_CURRENT_BINARY_DIR}/../Resources</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    [PREFIX TargetResourcePrefix]   # In the install tree, where to install resources (default &lt;empty&gt;).</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    [FILES [file1[file2...]]]        # Resources individual files to install</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;~~~</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;When a Radium based component needs to access several resources to implement its functionalities, this function installs the required resources.</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;This function takes the following parameters:</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;*Parameter name*                 | *Parameter description*</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;---------------------------------|--------------------</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; `&lt;TARGET&gt; targetName`           | The name of the target to configure.</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; `&lt;DIRECTORY&gt; resourceDirectory` | The directory in the source tree that contains the resource to install.</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; `&lt;BUILD_LOCATION&gt; whereToLink`  | If given, `&lt;DIRECTORY&gt;` will be linked in the build tree at this location. If not, the resource directory will be linked to `${CMAKE_CURRENT_BINARY_DIR}/../Resources` directory.</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; `&lt;PREFIX&gt; TargetResourcePrefix` | If given, the resources will be installed into the directory `&lt;install_prefix&gt;/Resources/&lt;PREFIX&gt;/`. If not, the resources will be installed into the directory `&lt;install_prefix&gt;/Resources/` where `&lt;install_prefix&gt;` is the installation directory of the target.</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; `&lt;FILES&gt; file1 file2 ...`       | If given, this allow to install only the given files from `&lt;DIRECTORY&gt;`. If not, all the files from `&lt;DIRECTORY&gt;` will be installed.</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;For a Radium-based software component, resources can be of several types:</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  - Text files, that contain some glsl source code used for shaders.</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  - Images used internally as textures or source of data.</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  - Precomputed data, stored in whatever format.</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  </div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;To access resources, the component might rely on a Ra::Core::Resources::ResourcesLocator object. Such an object allows to access files located in some predefined directories:</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  - Radium default resource directory. This directory is located at `&lt;prefix&gt;/Resources` where `&lt;prefix&gt;` is the Radium installation directory.</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  - Current executable directory. This directory is where the currently running executable is located.</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  </div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;In order to allow client component to access its own resources, and to allow that either on the build-tree or once the component is installed without having to recompile or modify anything, this function both links (on supported systems, copy elsewhere) and installs the component resources at the given places.</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;As the process must be system and component independent it is the responsibility of the client package to configure the proper paths for resources management.</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;According to the installation layout of the Radium lib, that matches the GNU standard, but also to the MacOs bundle architecture, Resources might be localized relatively to any binary object (library, executable, plugin, ...)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;The Radium installation hierarchy, that embeds base libraries, their resources and some executable files is the following:</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;```</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;&lt;prefix&gt;/</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;├── include/</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;|   ├── Core/</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;|   ├── Engine/</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;|   ...</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;├── lib/</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;|   ├── cmake/</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;|   |   └── Radium/</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;|   ├──  libCore.so</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;|   ...</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;├── bin/</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;|   ├──  main-app</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;|   ...</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;├── Resources/</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;|   ├── Shaders/</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;|   ├── Config/</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;|   ...</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;```</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;In this hierarchy, Resources are located in the relative path `../Resources/` from any binary (executable or lib).</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;The source code structure of the Radium libraries allows to have the same property on the build tree.</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;When a Radium component needs to access some resources, it could either use the Ra::Core::Resources::ResourcesLocator::getRadiumResourcesDir() method or search for the resource relatively to a symbol defined in the component.</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;To do this, the source code (.cpp file) of the component could contain the following.</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;~~~{.cpp}</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;#include &lt;MyComponent.hpp&gt;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;static int MyComponentMagick = 0x0F0F0F0F;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;...</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;// get the resource path relatively to the current location of the binary </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;auto resourcesPath = Ra::Core::Resources::ResourcesLocator(</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    reinterpret_cast&lt;void*&gt;( &amp;MyComponentMagick ), </div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    &quot;/Resources/MyComponentResources/&quot;, </div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    &quot;../&quot; );</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;// Read files from the found resourcesPath that will prefix the Resource files or directory</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;~~~</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;When using the [`installTargetResources`](#installTargetResources) function to configure the component resources installation, the following call should be made to allow access from both the build tree and the install tree using the above snippet.</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;# Assuming MyComponentTarget was configured as a library, plugin or executable, this will configure the resource access in the build tree and the install tree</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;installTargetResources(</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    TARGET MyComponentTarget                            # The name of the target</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/MyResource    # Where are the resources in the source tree</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    BUILD_LOCATION ${CMAKE_CURRENT_BINARY_DIR}/Resources/MyComponentResources # The resources will be linked here in the buildtree</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    PREFIX MyComponentResources # the resources will be installed in &lt;prefix&gt;/Resources/MyComponentResources</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;~~~</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;### Function `configure_radium_package` {#configurePackage}</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;configure_radium_package( </div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    NAME packageName                # The name of the package to install</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    PACKAGE_CONFIG configFile.in    # The package configuration file</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    [PACKAGE_DIR packageDirName]    # Name of the directory where the cmake config file will be installed (default &lt;prefix&gt;/lib/cmake/Radium)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;~~~</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;This cmake function configures the package `packageName` for installation and for further import in client project using `find_package(&lt;TARGET&gt;)`.</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;This function takes the following parameters:</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;*Parameter name*                 | *Parameter description*</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;---------------------------------|--------------------</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;`&lt;NAME&gt; packageName`             | The name of the package to configure and install</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;`&lt;PACKAGE_CONFIG&gt; configFile.in` | The configure script to be used by `find_package`.</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;`&lt;PACKAGE_DIR&gt; packageDirName`   | If given, the cmake configuration script `&lt;TARGET&gt;Config.cmake` searched by `find_package(&lt;TARGET&gt;)` will be installed in the directory `${CMAKE_INSTALL_PREFIX}/&lt;PACKAGE_DIR&gt;`. If not, the configure script will be installed in the directory `&lt;${CMAKE_INSTALL_PREFIX}/lib/cmake/Radium`.</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  </div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;This function is called implicitly, when defining a single component package, when the parameters `&lt;PACKAGE_CONFIG&gt;` and `&lt;PACKAGE_DIR&gt;` are given to the library configuration function [`configure_radium_library`](#configure_radium_library).</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;This function also allows to define multi-component packages for selective import using the `find_package(packageName [COMPONENTS comp1 comp2 ...]` command when called explicitly with an appropriate `PACKAGE_CONFIG` parameter.</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;### Function `radium_exported_resources` {#radium_exported_resources)}</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;radium_exported_resources(</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    TARGET target            # The name of the exported target</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    ACCESS_FROM_PACKAGE path # The path from the installe package module to the installed resources directory</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    [PREFIX resourcesPrefix] # Name of the directory in wich the resources are installed</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;~~~</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;This function defines the resources access properties for the exported target `&lt;target&gt;`. Based on these properties, client application and libraries might access to the exported resources.</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;This function takes the following parameters:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;*Parameter name*             | *Parameter description*</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;-----------------------------|--------------------</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;`&lt;TARGET&gt; target`            | The name of the package to configure and install</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;`&lt;ACCESS_FROM_PACKAGE&gt; path` | The path from the installed package module to the installed resources directory.</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;`&lt;PREFIX&gt; resourcesPrefix`   | Name of the directory in which the resources are installed.</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;As described above, the installation tree of any installed target, if configured with radium cmake utilities, looks like the following</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;```</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;prefix/</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;├── include/</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;|   ├── ...</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;├── lib/</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;|   ├── cmake/</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;|   |   └── targetConfig.cmake</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;|   ├──  libtarget.so (or.dylib, .dll)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;|   ...</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;├── Resources/</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;|   ├── resourcesPrefix</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;```</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;where `target` is the name of the exported target, `targetConfig.cmake` the cmake package module installed when installing the target and `resourcesPrefix` the resource prefix defined when installing the resources for the target (can be empty). </div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;In the above example, the `&lt;ACCESS_FROM_PACKAGE&gt; path` parameter of the function [`radium_exported_resources`](#radium_exported_resources) should be set to `&quot;../..&quot;`</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;This parameter must contain the relative path that start from the package module installation directory, here `&lt;prefix&gt;/lib/cmake`, to the resources installation directory, here `&lt;prefix&gt;/Resources`.</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;## Extending Radium through plugins</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;### Function `configure_radium_plugin` {#configure_radium_plugin}</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;configure_radium_plugin(</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    NAME pluginName                            # Name of the target (standard dynamic library) corresponding to the plugin</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    [RESOURCES ResourceDir1 [ResourceDir2 ...] # Optional. List of resources directories (only directories are allowed as resources)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    [HELPER_LIBS lib1 [lib2 ...]]              # Optional. List of libraries (local target or imported targets) the plugin depends on</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    [INSTALL_IN_RADIUM_BUNDLE]                 # Optional. If given, the plugin is installed into ${RADIUM_ROOT_DIR}/Plugins. If not, the installation is performed into ${CMAKE_INSTALL_PREFIX}</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;~~~</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;This cmake function configures the target `NAME pluginName` to be compiled, linked and optionally installed as a Radium Plugin. </div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;The plugin, and its optional resources, might then be used in any plugin-compatible Radium application.</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;If the plugin is installed in the Radium distribution bundle, it will be embedded in all bundled application installed later.</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;This function takes the following parameters:</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;*Parameter name*        | *Parameter description*</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;------------------------|--------------------</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;`NAME pluginName`               | Name of the target to be linked and installed as a plugin</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;`[RESOURCES ResourceDir1 [ResourceDir2 ...]` | Optional. List of directories, in the source tree, containing the plugin own resources. </div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;`[HELPER_LIBS helperlib1 [helperlib2 ...]]` | List of libraries the plugin depends on. </div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;`[INSTALL_IN_RADIUM_BUNDLE]` | Optional. If given, the plugin is installed in the Radium general bundle (`${RADIUM_ROOT_DIR}/Plugins`) instead of being installed in the `${CMAKE_INSTALL_PREFIX}`</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;The `pluginName` target must be a dynamic library that exports a class inheriting from `QObject` and Ra::Plugins::RadiumPluginInterface.</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;The optional resources associated with the plugin are own resources that the plugin needs to be functional and will be installed as described below.</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;The optional helper libraries can be local targets, configured in the same build tree, or imported targets, resulting from a `find_package(...)`.</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;If an helper library need to access its own resources, it must be configured using using [`configure_radium_library`](#configure_radium_library) if it is a local target or imported from an installed target configured the same way.</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;The directory hierarchy in which a plugin will be installed (or where the build target will be) is the following:</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;```</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;&lt;prefix&gt;/</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;├── lib/</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;|   ├──  libpluginName.so (or.dylib, .dll)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;|   ├──  helperlib1</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;|   ├──  ...</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;├── Resources/</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;|   ├── pluginName</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;|   |     ├── ResourceDir1</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;|   |     ...</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;```</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;where `&lt;prefix&gt;` refer to the base plugin dir into the build tree or the installation directory.</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; - In the build tree, `&lt;prefix&gt;` refers to the directory `${CMAKE_CURRENT_BINARY_DIR}/Plugins`. Resources directories are linked into `Resources` directory on system that supports links, copied otherwise. Helper libs are not copied into the hierarchy.</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; - When installed into the Radium distribution bundle, `&lt;prefix&gt;` refers to `${RADIUM_ROOT_DIR}/Plugins`. Optional resources directories are copied into `Resources` directory.</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; - When installed in the user specified install location, `&lt;prefix&gt;` refers to `${CMAKE_INSTALL_PREFIX}`. Optional resources directories are copied into `Resources` directory.</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;When a plugin is installed and depends on an helper library that embed its own resources, the helper resources are copied into the `&lt;prefix&gt;/Resources` directory so that the helper lib could find its resources as described in the section [`installTargetResources`](#installTargetResources).</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;In this hierarchy, a plugin will access to its resources in a way very similar than any other library. Only one level of hierarchy, whose name is the plugin name, will be added.</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;# How to write your CMakeLists.txt</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;When writing your cmake configuration script `CMakeLists.txt`, you might rely on the following guideline to configure the project `ProjectName`.</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;Note that these are only guidelines and that you can always write your cmake script from scratch, assuming you understand what you do.</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;## General cmake preamble</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;# -------------------------------------------------------</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;# Recommended preamble for cmake configuration</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;# -------------------------------------------------------</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;# Radium package requires cmake minimum version 3.13 </div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;cmake_minimum_required(3.13)</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;# It is recommended to disable in-source build</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;set(CMAKE_DISABLE_SOURCE_CHANGES ON)</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;set(CMAKE_DISABLE_IN_SOURCE_BUILD ON)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;# if not explicitely set by the user, set the install prefix to a bundle directory in the build tree</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;if (CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    set(CMAKE_INSTALL_PREFIX &quot;${CMAKE_CURRENT_BINARY_DIR}/installed-${CMAKE_CXX_COMPILER_ID}&quot; CACHE PATH</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        &quot;Install path prefix, prepended onto install directories.&quot; FORCE)</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    message(&quot;Set install prefix to ${CMAKE_INSTALL_PREFIX}&quot;)</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    set(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT False)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;endif ()</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;# -------------------------------------------------------</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;# Configure the project</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;# -------------------------------------------------------</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;project(ProjectName VERSION 1.0.0)</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;# The project requires Core and Engine component from Radium</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;find_package(Radium REQUIRED Core Engine)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;...</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;~~~</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;Then, according to the type of the targets defined in your project (application, single library, set of libraries, plugin, mix of them), you might configure your project according to the following guidelines.</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;## Configuring client application</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;Configuring an installable and relocatable application is very easy with Radium cmake scripts.</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;First, an executable target that depends on Radium libraries (internal Radium libraries or client libraries) should be configured with a cmake script such as</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;...</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;# Configure an relocatable executable target (here a bundle on MacOsX)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;add_executable(${PROJECT_NAME} MACOSX_BUNDLE</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    ...</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;~~~ </div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;Then, the application is configured to be relocatable after installation with </div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;# Configure the Radium application installation </div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;configure_radium_app(</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    NAME &lt;applicationName&gt;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    USE_PLUGINS</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    RESOURCES &lt;applicationResources&gt;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;)</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;~~~ </div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;Once compiled and installed, the directory `&lt;${CMAKE_INSTALL_PREFIX}&gt;`, set to `installed-&lt;COMPILER_ID&gt;-&lt;CONFIGURATION&gt;` into the root of the build tree if not specified at configure time, is a relocatable directory that contains the bundled application and associated resources.</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;Note that, on MacOsX, if the executable target is configured using the `MACOSX_BUNDLE` option, only the `bin` directory is created into this bundle and it contains the relocatable `.app` bundle.</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;If the option `MACOSX_BUNDLE` is not given, the executable will not be a bundled MacOs `.app` but a command line application and will be installed as any application on Linux.</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;The resources associated to an application are installed using the [`installTargetResources`](#installTargetResources).</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;## Configuring client and extension libraries</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;### Configuring the library target</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;An installable library could be used to add functionalities built over the Radium libraries and to make these functionalities available to developers.</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;Once installed, a library consists in:</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; - a set of public headers</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; - a dynamic library (`.so`, `.dylib` or `.dll`)</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; - a cmake config file so that the library could be fetched by the cmake command `find_package`</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; - [optionally] a set of associated resources</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;In order to fulfill Radium conventions, a library will be identified by a name into a namespace.</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;To configure an installable library based on Radium, it is recommended to have the following `CMakeLists.txt`</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;set(NAME_OF_LIBRARY NameOfTheLibrary)</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;# Build the lists of files constituting the target</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;set(sources</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    # list of the source files (e.g. .cpp) for the library</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;)</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;set(public_headers</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    # list of public headers (installed .hpp files) for the library</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;)</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;set(public_inlines</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    # list of public inline code (installed .inl files) for the library</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;set(headers</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    # list of private headers (not installed) for the library</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;set(inlines</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    # list of private inline code (not installed) for the library</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;)</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;# this is optional</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;set(resources</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    # list of files or directories that contains library specific resources (shaders, images, data, ...)</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    Shaders</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;)</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;# configuring the target as a dynamic library</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;add_library(</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    ${NAME_OF_LIBRARY} SHARED</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    ${sources}</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    ${headers}</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    ${inlines}</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    ${public_headers}</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    ${public_inlines}</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    ${resources}</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;# Setting specific target_* properties</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;... </div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;target_link_libraries(</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    ${NAME_OF_LIBRARY}</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    PUBLIC</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    # Give here the list of the dependency (e.g. Radium::Core ... ) to link with</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;)</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;# Configuring the library to be inserted into the Radium exosystem</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;message(&quot;Configure library ${NAME_OF_LIBRARY} for insertion into Radium exosystem&quot;)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;configure_radium_library(</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    TARGET ${NAME_OF_LIBRARY}</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    NAMESPACE ${NAME_OF_LIBRARY} # The imported target will be ${NAME_OF_LIBRARY}::${NAME_OF_LIBRARY}</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    PACKAGE_DIR ${CMAKE_INSTALL_PREFIX}/lib/cmake</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    PACKAGE_CONFIG ${CMAKE_CURRENT_SOURCE_DIR}/Config.cmake.in</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    FILES &quot;${public_headers};${public_inlines}&quot; # They will be installed in &lt;prefix&gt;/include/${NAME_OF_LIBRARY}/</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;~~~</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;The `Config.cmake.in` file used to configure the package could be written similarly to what described into the following section but with only one component.</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;### Configuring the cmake find_package module</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;When configuring a library, a cmake package configuration file should be written so that the cmake package configuration module is installed alongside the library.</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;Meanwhile, when several libraries must be used as components in a single package (e.g. the Radium internal libraries are all gathered into the single Radium package), a more general configuration module has to be defined.</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;For this, instead of defining a configuration package for each configured library, the parameter `PACKAGE_CONFIG` of the function [`configure_radium_library`](#configure_radium_library) should be omitted</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;and the function [`configure_radium_package`](#configurePackage) should be used.</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;Standard usage of this function requires to have some libraries configured like the following: </div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;...</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;add_library(</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    &lt;firstLib&gt; SHARED</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    ...</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;configure_radium_library(</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    TARGET &lt;firstLib&gt;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    FILES &quot;${firstLib_public_headers}&quot;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    TARGET_DIR &lt;include_prefix&gt;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    NAMESPACE &lt;namespace&gt;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    PACKAGE_DIR ${CMAKE_INSTALL_PREFIX}/lib/cmake</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;)</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;...</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;add_library(</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    &lt;secondLib&gt; SHARED</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    ...</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;configure_radium_library(</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    TARGET &lt;secondLib&gt;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    FILES &quot;${secondLib_public_headers}&quot;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    TARGET_DIR &lt;include_prefix&gt;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    NAMESPACE &lt;namespace&gt;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    PACKAGE_DIR ${CMAKE_INSTALL_PREFIX}/lib/cmake</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;)</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;...</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;~~~ </div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;Once this is done, the package should be configured using</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;...</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;configure_radium_package(</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    NAME &lt;packageName&gt;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    PACKAGE_DIR ${CMAKE_INSTALL_PREFIX}/lib/cmake</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    PACKAGE_CONFIG ${CMAKE_CURRENT_SOURCE_DIR}/&lt;packageName&gt;Config.cmake.in</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;~~~ </div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;Where the configuration file `&lt;packageName&gt;Config.cmake.in` should be written as the example below. </div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;(see [cmake documentation](https://cmake.org/cmake/help/v3.13/manual/cmake-packages.7.html) for deeper explanations on how to write a package configuration file).</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;# list the supported components</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;set(&lt;packageName&gt;_supported_components &lt;firstLib&gt; &lt;secondLib&gt;)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;# mark the package as found</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;set(&lt;packageName&gt;_FOUND True)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;# verify the list of requested component. If none is given, request for all components</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;if (NOT &lt;packageName&gt;_FIND_COMPONENTS)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    set(&lt;packageName&gt;_FIND_COMPONENTS ${&lt;packageName&gt;_supported_components})</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;endif()</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;# search for requested components</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;foreach(_comp ${&lt;packageName&gt;_FIND_COMPONENTS})</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  list(FIND &lt;packageName&gt;_supported_components ${_comp} ${_comp}_FOUND)</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  if (${${_comp}_FOUND} EQUAL -1)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    set(&lt;packageName&gt;_FOUND False)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    set(&lt;packageName&gt;_NOT_FOUND_MESSAGE &quot;Unsupported &lt;packageName&gt; component: ${_comp}&quot;)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  else()</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    set(${_comp}_FOUND True)</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  endif()</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;endforeach()</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;# configure individual components</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;#------------------------------------------------------------------------------------------------------------</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;include(CMakeFindDependencyMacro)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;# component &lt;firstLib&gt;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;if (&lt;firstLib&gt;_FOUND)</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    # manage component dependencies (e.g. some Radium components)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    if ( NOT Radium_FOUND)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        find_dependency(Radium COMPONENTS Core Engine REQUIRED)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    endif()</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    # include the target definition generated by configure_radium_library (must be installed in the same directory than the package module)</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    include(&quot;${CMAKE_CURRENT_LIST_DIR}/&lt;firstLib&gt;Targets.cmake&quot; )</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;endif()</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;# component &lt;secondLib&gt;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;if (&lt;secondLib&gt;_FOUND)</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    # manage component dependencies (e.g. &lt;firstLib&gt; must be requested and &lt;secondLib&gt; depends also on Qt5)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    if (NOT &lt;firstLib&gt;_FOUND)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        set(&lt;secondLib&gt;_FOUND False)</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        set(&lt;packageName&gt;_FOUND False)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        set(&lt;packageName&gt;_NOT_FOUND_MESSAGE &quot;Component &lt;secondLib&gt; requires the component &lt;firstLib&gt;&quot;)</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        # Note that you can also explicitely configure first lib instead of raising an error</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    else()</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        if (NOT Qt5_FOUND)</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            find_dependency(Qt5 COMPONENTS Core Widgets REQUIRED)</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        endif()</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        include(&quot;${CMAKE_CURRENT_LIST_DIR}/&lt;secondLib&gt;Targets.cmake&quot; )</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    endif()</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;endif()</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;~~~ </div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;Based on the above example, once the package `&lt;packageName&gt;` is found, the targets `&lt;namespace&gt;::&lt;firstLib&gt;` and  `&lt;namespace&gt;::&lt;secondLib&gt;` will be imported in the current project and should be used as any imported Radium targets.</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;### Configuring library resources</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;When a library need to access resources, the [`installTargetResources`](#installTargetResources) must be called once the library target is configured as explain above.</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;This result, as an example, in the following cmake snippet if the library `${NAME_OF_LIBRARY}` need to access glsl source file from the resource directory `${CMAKE_CURRENT_SOURCE_DIR}/Shaders` in the source tree.</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;# Optional, if the library need resources</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;installTargetResources(</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        TARGET ${NAME_OF_LIBRARY}</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/Shaders</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;~~~</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;In this case, the library must also associate its resources with its exported target so that, when the library is imported in an application, plugin or other library, the resources will be made available.</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;For doing this, the corresponding package configuration file (e.g. `&lt;packageName&gt;Config.cmake.in`) should add properties to all exported targets describing their resources.</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;The following properties should be added to the corresponding targets:</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  - `RADIUM_TARGET_RESOURCES_PREFIX` : defines the directory prefix to access the library resources</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  - `RADIUM_TARGET_INSTALLED_RESOURCES` : specify where are installed the resources on the system.</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;These properties, located in the installation tree, are the same than those defined when installing resources for a library and should be set by using the function [`radium_exported_resources`](#radium_exported_resources) in the</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;`&lt;packageName&gt;Config.cmake.in` such as</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;~~~{.cmake}</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;radium_exported_resources(</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    TARGET &lt;namespace&gt;::&lt;libtarget&gt;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    ACCESS_FROM_PACKAGE &lt;pathFromPackageToResourcesInInstallTree&gt;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    PREFIX &lt;resourcesPrefix&gt;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;~~~ </div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;where `&lt;resourcesPrefix&gt;` corresponds to the parameter `PREFIX` used when installing the resources for the target `&lt;namespace&gt;::&lt;libtarget&gt;`.</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;## Configuring an application plugin</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;See the dedicated how to [How to write your own plugin](@ref develplugin).</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="cmakeutilities_8md.html">cmakeutilities.md</a></li>
    <li class="footer">Generated on Tue Nov 17 2020 16:20:31 for Radium Engine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
